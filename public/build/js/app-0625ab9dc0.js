!function(e,t){function n(e){return e&&e.__wrapped__?e:this instanceof n?void(this.__wrapped__=e):new n(e)}function r(e,t,n){t||(t=0);var r=e.length,a=r-t>=(n||te);if(a)for(var o={},n=t-1;++n<r;){var i=e[n]+"";(be.call(o,i)?o[i]:o[i]=[]).push(e[n])}return function(n){if(a){var r=n+"";return be.call(o,r)&&-1<N(o[r],n)}return-1<N(e,n,t)}}function a(e){return e.charCodeAt(0)}function o(e,n){var r=e.b,a=n.b,e=e.a,n=n.a;if(e!==n){if(e>n||e===t)return 1;if(e<n||n===t)return-1}return r<a?-1:1}function i(e,t,n){function r(){var s=arguments,u=o?this:t;return a||(e=t[i]),n.length&&(s=s.length?n.concat(Te.call(s)):n),this instanceof r?(f.prototype=e.prototype,u=new f,s=e.apply(u,s),b(s)?s:u):e.apply(u,s)}var a=_(e),o=!n,i=t;return o&&(n=t),a||(t=e),r}function s(e,n){return e?"function"!=typeof e?function(t){return t[e]}:n!==t?function(t,r,a){return e.call(n,t,r,a)}:e:q}function u(){for(var e,t={b:"",c:"",e:V,f:Ze,g:"",h:Ee,i:Be,j:ge,k:"",l:J},n=0;e=arguments[n];n++)for(var r in e)t[r]=e[r];if(e=t.a,t.d=/^[^,]+/.exec(e)[0],n="var i,x,l="+t.d+",t="+t.d+";if(!"+t.d+")return t;"+t.k+";",t.b?(n+="var m=l.length;i=-1;if(typeof m=='number'){",t.i&&(n+="if(k(l)){l=l.split('')}"),n+="while(++i<m){x=l[i];"+t.b+"}}else {"):t.h&&(n+="var m=l.length;i=-1;if(m&&j(l)){while(++i<m){x=l[i+=''];"+t.g+"}}else {"),t.e||(n+="var u=typeof l=='function'&&s.call(l,'prototype');"),t.f&&t.l?(n+="var q=-1,r=p[typeof l]?n(l):[],m=r.length;while(++q<m){i=r[q];",t.e||(n+="if(!(u&&i=='prototype')){"),n+="x=l[i];"+t.g,t.e||(n+="}")):(n+="for(i in l){",t.e&&!t.l||(n+="if(",t.e||(n+="!(u&&i=='prototype')"),!t.e&&t.l&&(n+="&&"),t.l&&(n+="h.call(l,i)"),n+="){"),n+="x=l[i];"+t.g+";",t.e&&!t.l||(n+="}")),n+="}",t.e)for(n+="var f=l.constructor;",r=0;7>r;r++)n+="i='"+t.j[r]+"';if(","constructor"==t.j[r]&&(n+="!(f&&f.prototype===l)&&"),n+="h.call(l,i)){x=l[i];"+t.g+"}";return(t.b||t.h)&&(n+="}"),n+=t.c+";return t",Function("e,h,j,k,p,n,s","return function("+e+"){"+n+"}")(s,be,p,D,Qe,He,we)}function c(e){return"\\"+Ke[e]}function l(e){return it[e]}function f(){}function d(e){return st[e]}function p(e){return ke.call(e)==Ce}function h(e){var t=B;if(!e||"object"!=typeof e||p(e))return t;var n=e.constructor;return Ge&&"function"!=typeof e.toString&&"string"==typeof(e+"")||_(n)&&!(n instanceof n)?t:Z?(at(e,function(e,n,r){return t=!be.call(r,n),B}),t===B):(at(e,function(e,n){t=n}),t===B||be.call(e,t))}function m(e){var t=[];return ot(e,function(e,n){t.push(n)}),t}function g(e,t,n,r,a){if(e==R)return e;if(n&&(t=B),n=b(e)){var o=ke.call(e);if(!Xe[o]||Je&&p(e))return e;var i=o==je,n=i||(o==ze?lt(e):n)}if(!n||!t)return n?i?Te.call(e):rt({},e):e;switch(n=e.constructor,o){case Ae:case Ne:return new n((+e));case Ye:case We:return new n(e);case Le:return n(e.source,ue.exec(e))}for(r||(r=[]),a||(a=[]),o=r.length;o--;)if(r[o]==e)return a[o];var s=i?n(e.length):{};return r.push(e),a.push(s),(i?dt:ot)(e,function(e,n){s[n]=g(e,t,R,r,a)}),s}function v(e){var t=[];return at(e,function(e,n){_(e)&&t.push(n)}),t.sort()}function y(e){var t={};return ot(e,function(e,n){t[e]=n}),t}function x(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(e==R||t==R)return e===t;var a=ke.call(e);if(a!=ke.call(t))return B;switch(a){case Ae:case Ne:return+e==+t;case Ye:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case Le:case We:return e==t+""}var o=a==je||a==Ce;if(Je&&!o&&(o=p(e))&&!p(t))return B;if(!o){if(e.__wrapped__||t.__wrapped__)return x(e.__wrapped__||e,t.__wrapped__||t);if(a!=ze||Ge&&("function"!=typeof e.toString&&"string"==typeof(e+"")||"function"!=typeof t.toString&&"string"==typeof(t+"")))return B;var a=e.constructor,i=t.constructor;if(!(a==i||_(a)&&a instanceof a&&_(i)&&i instanceof i))return B}for(n||(n=[]),r||(r=[]),a=n.length;a--;)if(n[a]==e)return r[a]==t;var a=-1,i=J,s=0;if(n.push(e),r.push(t),o){if(s=e.length,i=s==t.length)for(;s--&&(i=x(e[s],t[s],n,r)););return i}for(var u in e)if(be.call(e,u)&&(s++,!be.call(t,u)||!x(e[u],t[u],n,r)))return B;for(u in t)if(be.call(t,u)&&!s--)return B;if(V)for(;7>++a;)if(u=ge[a],be.call(e,u)&&(!be.call(t,u)||!x(e[u],t[u],n,r)))return B;return J}function _(e){return"function"==typeof e}function b(e){return e?Qe[typeof e]:B}function D(e){return ke.call(e)==We}function w(e,t,n){var r=arguments,a=0,o=2,i=r[3],s=r[4];for(n!==ee&&(i=[],s=[],"number"!=typeof n&&(o=r.length));++a<o;)ot(r[a],function(t,n){var r,a,o;if(t&&((a=ct(t))||lt(t))){for(var u=i.length;u--&&!(r=i[u]==t););r?e[n]=s[u]:(i.push(t),s.push((o=e[n],o=a?ct(o)?o:[]:lt(o)?o:{})),e[n]=w(o,t,ee,i,s))}else t!=R&&(e[n]=t)});return e}function T(e){var t=[];return ot(e,function(e){t.push(e)}),t}function k(e,t,n){var r=-1,a=e?e.length:0,o=B,n=(0>n?Fe(0,a+n):n)||0;return"number"==typeof a?o=-1<(D(e)?e.indexOf(t,n):N(e,t,n)):dt(e,function(e){if(++r>=n)return!(o=e===t)}),o}function M(e,t,n){var r=J,t=s(t,n);if(ct(e))for(var n=-1,a=e.length;++n<a&&(r=!!t(e[n],n,e)););else dt(e,function(e,n,a){return r=!!t(e,n,a)});return r}function S(e,t,n){var r=[],t=s(t,n);if(ct(e))for(var n=-1,a=e.length;++n<a;){var o=e[n];t(o,n,e)&&r.push(o)}else dt(e,function(e,n,a){t(e,n,a)&&r.push(e)});return r}function O(e,t,n){var r,t=s(t,n);return dt(e,function(e,n,a){if(t(e,n,a))return r=e,B}),r}function I(e,t,n){var r=-1,a=e?e.length:0,o=Array("number"==typeof a?a:0),t=s(t,n);if(ct(e))for(;++r<a;)o[r]=t(e[r],r,e);else dt(e,function(e,n,a){o[++r]=t(e,n,a)});return o}function H(e,t,n){var r=-(1/0),o=-1,i=e?e.length:0,u=r;if(t||!ct(e))t=!t&&D(e)?a:s(t,n),dt(e,function(e,n,a){n=t(e,n,a),n>r&&(r=n,u=e)});else for(;++o<i;)e[o]>u&&(u=e[o]);return u}function F(e,t){var n=[];return dt(e,function(e){n.push(e[t])}),n}function P(e,t,n,r){var a=3>arguments.length,t=s(t,r);return dt(e,function(e,r,o){n=a?(a=B,e):t(n,e,r,o)}),n}function $(e,t,n,r){var a=e,o=e?e.length:0,i=3>arguments.length;if("number"!=typeof o)var s=ft(e),o=s.length;else Be&&D(e)&&(a=e.split(""));return dt(e,function(e,u,c){u=s?s[--o]:--o,n=i?(i=B,a[u]):t.call(r,n,a[u],u,c)}),n}function C(e,t,n){var r,t=s(t,n);if(ct(e))for(var n=-1,a=e.length;++n<a&&!(r=t(e[n],n,e)););else dt(e,function(e,n,a){return!(r=t(e,n,a))});return!!r}function j(e,t,n){if(e)return t==R||n?e[0]:Te.call(e,0,t)}function A(e,t){for(var n=-1,r=e?e.length:0,a=[];++n<r;){var o=e[n];ct(o)?De.apply(a,t?o:A(o)):a.push(o)}return a}function N(e,t,n){var r=-1,a=e?e.length:0;if("number"==typeof n)r=(0>n?Fe(0,a+n):n||0)-1;else if(n)return r=z(e,t),e[r]===t?r:-1;for(;++r<a;)if(e[r]===t)return r;return-1}function Y(e,t,n){return e?Te.call(e,t==R||n?1:t):[]}function z(e,t,n,r){for(var a=0,o=e?e.length:a,n=n?s(n,r):q,t=n(t);a<o;)r=a+o>>>1,n(e[r])<t?a=r+1:o=r;return a}function L(e,t,n,r){var a=-1,o=e?e.length:0,i=[],u=i;"function"==typeof t&&(r=n,n=t,t=B);var c=!t&&74<o;if(c)var l={};for(n&&(u=[],n=s(n,r));++a<o;){var r=e[a],f=n?n(r,a,e):r;c&&(u=be.call(l,f+"")?l[f]:l[f]=[]),(t?!a||u[u.length-1]!==f:0>N(u,f))&&((n||c)&&u.push(f),i.push(r))}return i}function W(e,t){return Ve||Me&&2<arguments.length?Me.call.apply(Me,arguments):i(e,t,Te.call(arguments,2))}function q(e){return e}function E(e){dt(v(e),function(t){var r=n[t]=e[t];n.prototype[t]=function(){var e=[this.__wrapped__];return De.apply(e,arguments),e=r.apply(n,e),this.__chain__&&(e=new n(e),e.__chain__=J),e}})}var J=!0,R=null,B=!1,G="object"==typeof exports&&exports,U="object"==typeof global&&global;U.global===U&&(e=U);var V,Z,X=[],Q=new function(){},K=0,ee=Q,te=30,ne=e._,re=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,ae=/&(?:amp|lt|gt|quot|#x27);/g,oe=/\b__p\+='';/g,ie=/\b(__p\+=)''\+/g,se=/(__e\(.*?\)|\b__t\))\+'';/g,ue=/\w*$/,ce=/(?:__e|__t=)\(\s*(?![\d\s"']|this\.)/g,le=RegExp("^"+(Q.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),fe=/\$\{((?:(?=\\?)\\?[\s\S])*?)}/g,de=/<%=([\s\S]+?)%>/g,pe=/($^)/,he=/[&<>"']/g,me=/['\n\r\t\u2028\u2029\\]/g,ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),ve=Math.ceil,ye=X.concat,xe=Math.floor,_e=le.test(_e=Object.getPrototypeOf)&&_e,be=Q.hasOwnProperty,De=X.push,we=Q.propertyIsEnumerable,Te=X.slice,ke=Q.toString,Me=le.test(Me=Te.bind)&&Me,Se=le.test(Se=Array.isArray)&&Se,Oe=e.isFinite,Ie=e.isNaN,He=le.test(He=Object.keys)&&He,Fe=Math.max,Pe=Math.min,$e=Math.random,Ce="[object Arguments]",je="[object Array]",Ae="[object Boolean]",Ne="[object Date]",Ye="[object Number]",ze="[object Object]",Le="[object RegExp]",We="[object String]",qe=(qe={0:1,length:1},X.splice.call(qe,0,1),qe[0]),Ee=J;!function(){function e(){this.x=1}var t=[];e.prototype={valueOf:1,y:1};for(var n in new e)t.push(n);for(n in arguments)Ee=!n;V=!/valueOf/.test(t),Z="x"!=t[0]}(1);var Je=!p(arguments),Re="x"!=Te.call("x")[0],Be="xx"!="x"[0]+Object("x")[0];try{var Ge=ke.call(e.document||0)==ze}catch(Ue){}var Ve=Me&&/\n|Opera/.test(Me+ke.call(e.opera)),Ze=He&&/^.+$|true/.test(He+!!e.attachEvent),Xe={};Xe[Ce]=Xe["[object Function]"]=B,Xe[je]=Xe[Ae]=Xe[Ne]=Xe[Ye]=Xe[ze]=Xe[Le]=Xe[We]=J;var Qe={"boolean":B,"function":J,object:J,number:B,string:B,undefined:B},Ke={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};n.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:de,variable:""};var et={a:"o,v,g",k:"for(var a=1,b=typeof g=='number'?2:arguments.length;a<b;a++){if((l=arguments[a])){",g:"t[i]=x",c:"}}"},tt={a:"d,c,w",k:"c=e(c,w)",b:"if(c(x,i,d)===false)return t",g:"if(c(x,i,d)===false)return t"},nt={b:R},rt=u(et);Je&&(p=function(e){return e?be.call(e,"callee"):B});var at=u(tt,nt,{l:B}),ot=u(tt,nt),it={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},st=y(it),ut=u(et,{g:"if(t[i]==null)"+et.g}),ct=Se||function(e){return ke.call(e)==je};_(/x/)&&(_=function(e){return"[object Function]"==ke.call(e)});var lt=_e?function(e){if(!e||"object"!=typeof e)return B;var t=e.valueOf,n="function"==typeof t&&(n=_e(t))&&_e(n);return n?e==n||_e(e)==n&&!p(e):h(e)}:h,ft=He?function(e){return"function"==typeof e&&we.call(e,"prototype")?m(e):b(e)?He(e):[]}:m,dt=u(tt);n.VERSION="0.10.0",n.assign=rt,n.after=function(e,t){return 1>e?t():function(){if(1>--e)return t.apply(this,arguments)}},n.bind=W,n.bindAll=function(e){for(var t=arguments,n=1<t.length?0:(t=v(e),-1),r=t.length;++n<r;){var a=t[n];e[a]=W(e[a],e)}return e},n.bindKey=function(e,t){return i(e,t,Te.call(arguments,2))},n.chain=function(e){return e=new n(e),e.__chain__=J,e},n.clone=g,n.compact=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var a=e[t];a&&r.push(a)}return r},n.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},n.contains=k,n.countBy=function(e,t,n){var r={},t=s(t,n);return dt(e,function(e,n,a){n=t(e,n,a),be.call(r,n)?r[n]++:r[n]=1}),r},n.debounce=function(e,t,n){function r(){s=R,n||(o=e.apply(i,a))}var a,o,i,s;return function(){var u=n&&!s;return a=arguments,i=this,clearTimeout(s),s=setTimeout(r,t),u&&(o=e.apply(i,a)),o}},n.defaults=ut,n.defer=function(e){var n=Te.call(arguments,1);return setTimeout(function(){e.apply(t,n)},1)},n.delay=function(e,n){var r=Te.call(arguments,2);return setTimeout(function(){e.apply(t,r)},n)},n.difference=function(e){for(var t=-1,n=e?e.length:0,a=ye.apply(X,arguments),a=r(a,n),o=[];++t<n;){var i=e[t];a(i)||o.push(i)}return o},n.escape=function(e){return e==R?"":(e+"").replace(he,l)},n.every=M,n.filter=S,n.find=O,n.first=j,n.flatten=A,n.forEach=dt,n.forIn=at,n.forOwn=ot,n.functions=v,n.groupBy=function(e,t,n){var r={},t=s(t,n);return dt(e,function(e,n,a){n=t(e,n,a),(be.call(r,n)?r[n]:r[n]=[]).push(e)}),r},n.has=function(e,t){return e?be.call(e,t):B},n.identity=q,n.indexOf=N,n.initial=function(e,t,n){return e?Te.call(e,0,-(t==R||n?1:t)):[]},n.intersection=function(e){var t=arguments,n=t.length,a={},o=[];return dt(e,function(e){if(0>N(o,e)){for(var i=n;--i;)if(!(a[i]||(a[i]=r(t[i])))(e))return;o.push(e)}}),o},n.invert=y,n.invoke=function(e,t){var n=Te.call(arguments,2),r="function"==typeof t,a=[];return dt(e,function(e){a.push((r?t:e[t]).apply(e,n))}),a},n.isArguments=p,n.isArray=ct,n.isBoolean=function(e){return e===J||e===B||ke.call(e)==Ae},n.isDate=function(e){return ke.call(e)==Ne},n.isElement=function(e){return e?1===e.nodeType:B},n.isEmpty=function(e){var t=J;if(!e)return t;var n=ke.call(e),r=e.length;return n==je||n==We||n==Ce||Je&&p(e)||n==ze&&"number"==typeof r&&_(e.splice)?!r:(ot(e,function(){return t=B}),t)},n.isEqual=x,n.isFinite=function(e){return Oe(e)&&!Ie(parseFloat(e))},n.isFunction=_,n.isNaN=function(e){return ke.call(e)==Ye&&e!=+e},n.isNull=function(e){return e===R},n.isNumber=function(e){return ke.call(e)==Ye},n.isObject=b,n.isPlainObject=lt,n.isRegExp=function(e){return ke.call(e)==Le},n.isString=D,n.isUndefined=function(e){return e===t},n.keys=ft,n.last=function(e,t,n){if(e){var r=e.length;return t==R||n?e[r-1]:Te.call(e,-t||r)}},n.lastIndexOf=function(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(0>n?Fe(0,r+n):Pe(n,r-1))+1);r--;)if(e[r]===t)return r;return-1},n.map=I,n.max=H,n.memoize=function(e,t){var n={};return function(){var r=t?t.apply(this,arguments):arguments[0];return be.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}},n.merge=w,n.min=function(e,t,n){var r=1/0,o=-1,i=e?e.length:0,u=r;if(t||!ct(e))t=!t&&D(e)?a:s(t,n),dt(e,function(e,n,a){n=t(e,n,a),n<r&&(r=n,u=e)});else for(;++o<i;)e[o]<u&&(u=e[o]);return u},n.mixin=E,n.noConflict=function(){return e._=ne,this},n.object=function(e,t){for(var n=-1,r=e?e.length:0,a={};++n<r;){var o=e[n];t?a[o]=t[n]:a[o[0]]=o[1]}return a},n.omit=function(e,t,n){var r="function"==typeof t,a={};if(r)t=s(t,n);else var o=ye.apply(X,arguments);return at(e,function(e,n,i){(r?!t(e,n,i):0>N(o,n,1))&&(a[n]=e)}),a},n.once=function(e){var t,n=B;return function(){return n?t:(n=J,t=e.apply(this,arguments),e=R,t)}},n.pairs=function(e){var t=[];return ot(e,function(e,n){t.push([n,e])}),t},n.partial=function(e){return i(e,Te.call(arguments,1))},n.pick=function(e,t,n){var r={};if("function"!=typeof t)for(var a=0,o=ye.apply(X,arguments),i=o.length;++a<i;){var u=o[a];u in e&&(r[u]=e[u])}else t=s(t,n),at(e,function(e,n,a){t(e,n,a)&&(r[n]=e)});return r},n.pluck=F,n.random=function(e,t){return e==R&&t==R&&(t=1),e=+e||0,t==R&&(t=e,e=0),e+xe($e()*((+t||0)-e+1))},n.range=function(e,t,n){e=+e||0,n=+n||1,t==R&&(t=e,e=0);for(var r=-1,t=Fe(0,ve((t-e)/n)),a=Array(t);++r<t;)a[r]=e,e+=n;return a},n.reduce=P,n.reduceRight=$,n.reject=function(e,t,n){return t=s(t,n),S(e,function(e,n,r){return!t(e,n,r)})},n.rest=Y,n.result=function(e,t){var n=e?e[t]:R;return _(n)?e[t]():n},n.shuffle=function(e){var t=-1,n=Array(e?e.length:0);return dt(e,function(e){var r=xe($e()*(++t+1));n[t]=n[r],n[r]=e}),n},n.size=function(e){var t=e?e.length:0;return"number"==typeof t?t:ft(e).length},n.some=C,n.sortBy=function(e,t,n){var r=[],t=s(t,n);for(dt(e,function(e,n,a){r.push({a:t(e,n,a),b:n,c:e})}),e=r.length,r.sort(o);e--;)r[e]=r[e].c;return r},n.sortedIndex=z,n.tap=function(e,t){return t(e),e},n.template=function(e,t,r){e||(e=""),r||(r={});var a,o,i=n.templateSettings,s=0,u=r.interpolate||i.interpolate||pe,l="__p += '",f=r.variable||i.variable,d=f;e.replace(RegExp((r.escape||i.escape||pe).source+"|"+u.source+"|"+(u===de?fe:pe).source+"|"+(r.evaluate||i.evaluate||pe).source+"|$","g"),function(t,n,r,o,i,u){r||(r=o),l+=e.slice(s,u).replace(me,c),l+=n?"'+__e("+n+")+'":i?"';"+i+";__p+='":r?"'+((__t=("+r+"))==null?'':__t)+'":"",a||(a=i||re.test(n||r)),s=u+t.length}),l+="';",d||(f="obj",a?l="with("+f+"){"+l+"}":(r=RegExp("(\\(\\s*)"+f+"\\."+f+"\\b","g"),l=l.replace(ce,"$&"+f+".").replace(r,"$1__d"))),l=(a?l.replace(oe,""):l).replace(ie,"$1").replace(se,"$1;"),l="function("+f+"){"+(d?"":f+"||("+f+"={});")+"var __t,__p='',__e=_.escape"+(a?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":(d?"":",__d="+f+"."+f+"||"+f)+";")+l+"return __p}";try{o=Function("_","return "+l)(n)}catch(p){throw p.source=l,p}return t?o(t):(o.source=l,o)},n.throttle=function(e,t){function n(){s=new Date,i=R,a=e.apply(o,r)}var r,a,o,i,s=0;return function(){var u=new Date,c=t-(u-s);return r=arguments,o=this,0>=c?(clearTimeout(i),s=u,a=e.apply(o,r)):i||(i=setTimeout(n,c)),a}},n.times=function(e,t,n){for(var e=+e||0,r=-1,a=Array(e);++r<e;)a[r]=t.call(n,r);return a},n.toArray=function(e){return e&&"number"==typeof e.length?(Re?D(e):"string"==typeof e)?e.split(""):Te.call(e):T(e)},n.unescape=function(e){return e==R?"":(e+"").replace(ae,d)},n.union=function(){return L(ye.apply(X,arguments))},n.uniq=L,n.uniqueId=function(e){var t=K++;return e?e+t:t},n.values=T,n.where=function(e,t){var n=ft(t);return S(e,function(e){for(var r=n.length;r--;){var a=e[n[r]]===t[n[r]];if(!a)break}return!!a})},n.without=function(e){for(var t=-1,n=e?e.length:0,a=r(arguments,1,20),o=[];++t<n;){var i=e[t];a(i)||o.push(i)}return o},n.wrap=function(e,t){return function(){var n=[e];return De.apply(n,arguments),t.apply(this,n)}},n.zip=function(e){for(var t=-1,n=e?H(F(arguments,"length")):0,r=Array(n);++t<n;)r[t]=F(arguments,t);return r},n.all=M,n.any=C,n.collect=I,n.detect=O,n.drop=Y,n.each=dt,n.extend=rt,n.foldl=P,n.foldr=$,n.head=j,n.include=k,n.inject=P,n.methods=v,n.select=S,n.tail=Y,n.take=j,n.unique=L,E(n),n.prototype.chain=function(){return this.__chain__=J,this},n.prototype.value=function(){return this.__wrapped__},dt("pop push reverse shift sort splice unshift".split(" "),function(e){var t=X[e];n.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),qe&&0===e.length&&delete e[0],this.__chain__&&(e=new n(e),e.__chain__=J),e}}),dt(["concat","join","slice"],function(e){var t=X[e];n.prototype[e]=function(){var e=t.apply(this.__wrapped__,arguments);return this.__chain__&&(e=new n(e),e.__chain__=J),e}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e._=n,define(function(){return n})):G?"object"==typeof module&&module&&module.exports==G?(module.exports=n)._=n:G._=n:e._=n}(this),function(){function e(){return{restrict:"A",priority:-1,require:"ngForm",controller:t}}function t(e,t,n,r){function a(){var r=t(n.nbgTrackedTable).assign;r(e,p),e.$on("$destroy",function(){r(null)}),p.reset=s,p.isCellDirty=i,p.setCellDirty=u,p.setCellInvalid=c,p.untrack=d}function o(e,t){return _.find(t,function(t){return t.row===e})}function i(e,t){var n=o(e,h);return n&&n.cells.indexOf(t)!==-1}function s(){h=[],m=[],f(!1)}function u(e,t,n){l(e,t,n,h)}function c(e,t,n){l(e,t,n,m),f(m.length>0)}function l(e,t,n,r){var a=o(e,r);(a||n)&&(n?(a||(a={row:e,cells:[]},r.push(a)),a.cells.indexOf(t)===-1&&a.cells.push(t)):(_.remove(a.cells,function(e){return t===e}),0===a.cells.length&&_.remove(r,function(e){return a===e})))}function f(e){p.$invalid=e,p.$valid=!e}function d(e){_.remove(m,function(t){return t.row===e}),_.remove(h,function(t){return t.row===e}),f(m.length>0)}var p=this,h=(r.controller("form"),[]),m=[];a()}angular.module("zwb").directive("nbgTrackedTable",e),e.$inject=[],t.$inject=["$scope","$parse","$attrs","$element"]}(),function(){function e(){return{restrict:"A",priority:-1,require:["^nbgTrackedTable","ngForm"],controller:t}}function t(e,t,n,r){function a(e){return c.isCellDirty(u,e)}function o(e,t){c.setCellDirty(u,e,t)}function i(e,t){c.setCellInvalid(u,e,t)}var s=this,u=n(e.nbgTrackedTableRow)(r),c=(t.controller("form"),t.controller("nbgTrackedTable"));s.isCellDirty=a,s.setCellDirty=o,s.setCellInvalid=i}angular.module("zwb").directive("nbgTrackedTableRow",e),e.$inject=[],t.$inject=["$attrs","$element","$parse","$scope"]}(),function(){function e(){return{restrict:"A",priority:-1,scope:!0,require:["^nbgTrackedTableRow","ngForm"],controller:t}}function t(e,t,n){var r=t.controller("form"),a=r.$name,o=t.controller("nbgTrackedTableRow");o.isCellDirty(a)?r.$setDirty():r.$setPristine(),n.$watch(function(){return r.$dirty},function(e,t){e!==t&&o.setCellDirty(a,e)}),n.$watch(function(){return r.$invalid},function(e,t){e!==t&&o.setCellInvalid(a,e)})}angular.module("zwb").directive("nbgTrackedTableCell",e),e.$inject=[],t.$inject=["$attrs","$element","$scope"]}(),function(e){var t=null,n={i18n:{ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вск","Пн","Вт","Ср","Чт","Пт","Сб"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeek:["Paz","Pts","Sal","Çar","Per","Cum","Cts"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeek:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeek:["nd","pn","wt","śr","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",step:60,closeOnDateSelect:0,closeOnWithoutClick:!0,timepicker:!0,datepicker:!0,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,inline:!1,onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,mask:!1,validateOnBlur:!0,allowBlank:!1,yearStart:1950,yearEnd:2050,style:"",id:"",roundTime:"round",className:"",weekends:[],yearOffset:0};Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;n<r;n++)if(this[n]===e)return n;return-1}),e.fn.xdsoftScroller=function(t){return this.each(function(){var n=e(this);if(!e(this).hasClass("xdsoft_scroller_box")){var r=function(e){var t={x:0,y:0};if("touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"touchcancel"==e.type){var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.x=n.pageX,t.y=n.pageY}else"mousedown"!=e.type&&"mouseup"!=e.type&&"mousemove"!=e.type&&"mouseover"!=e.type&&"mouseout"!=e.type&&"mouseenter"!=e.type&&"mouseleave"!=e.type||(t.x=e.pageX,t.y=e.pageY);return t},a=0,o=n.children().eq(0),i=n[0].clientHeight,s=o[0].offsetHeight,u=e('<div class="xdsoft_scrollbar"></div>'),c=e('<div class="xdsoft_scroller"></div>'),l=100,f=!1;u.append(c),n.addClass("xdsoft_scroller_box").append(u),c.on("mousedown.xdsoft_scroller",function(r){i||n.trigger("resize_scroll.xdsoft_scroller",[t]);var o=r.pageY,s=parseInt(c.css("margin-top")),f=u[0].offsetHeight;e(document.body).addClass("xdsoft_noselect"),e([document.body,window]).on("mouseup.xdsoft_scroller",function d(){e([document.body,window]).off("mouseup.xdsoft_scroller",d).off("mousemove.xdsoft_scroller",a).removeClass("xdsoft_noselect")}),e(document.body).on("mousemove.xdsoft_scroller",a=function(e){var t=e.pageY-o+s;t<0&&(t=0),t+c[0].offsetHeight>f&&(t=f-c[0].offsetHeight),n.trigger("scroll_element.xdsoft_scroller",[l?t/l:0])})}),n.on("scroll_element.xdsoft_scroller",function(e,t){i||n.trigger("resize_scroll.xdsoft_scroller",[t,!0]),t=t>1?1:t<0||isNaN(t)?0:t,c.css("margin-top",l*t),o.css("marginTop",-parseInt((s-i)*t))}).on("resize_scroll.xdsoft_scroller",function(e,t,r){i=n[0].clientHeight,s=o[0].offsetHeight;var a=i/s,f=a*u[0].offsetHeight;a>1?c.hide():(c.show(),c.css("height",parseInt(f>10?f:10)),l=u[0].offsetHeight-c[0].offsetHeight,r!==!0&&n.trigger("scroll_element.xdsoft_scroller",[t?t:Math.abs(parseInt(o.css("marginTop")))/(s-i)]))}),n.mousewheel&&n.mousewheel(function(e,t,r,a){var u=Math.abs(parseInt(o.css("marginTop")));return n.trigger("scroll_element.xdsoft_scroller",[(u-20*t)/(s-i)]),e.stopPropagation(),!1}),n.on("touchstart",function(e){f=r(e)}),n.on("touchmove",function(e){if(f){var t=r(e),a=Math.abs(parseInt(o.css("marginTop")));n.trigger("scroll_element.xdsoft_scroller",[(a-(t.y-f.y))/(s-i)]),e.stopPropagation(),e.preventDefault()}}),n.on("touchend touchcancel",function(e){f=!1})}n.trigger("resize_scroll.xdsoft_scroller",[t])})},e.fn.datetimepicker=function(r){t=this;var a=48,o=57,i=96,s=105,u=17,c=46,l=13,f=27,d=8,p=37,h=38,m=39,g=40,v=9,y=116,x=65,_=67,b=86,D=90,w=89,T=!1,k=e.isPlainObject(r)||!r?e.extend(!0,{},n,r):e.extend({},n),M=function(t){var n=e("<div "+(k.id?'id="'+k.id+'"':"")+" "+(k.style?'style="'+k.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_noselect '+k.className+'"></div>'),r=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),M=e('<div class="xdsoft_datepicker active"></div>'),S=e('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span></div><div class="xdsoft_label xdsoft_year"><span></span></div><button type="button" class="xdsoft_next"></button></div>'),O=e('<div class="xdsoft_calendar"></div>'),I=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),H=I.find(".xdsoft_time_box").eq(0),F=e('<div class="xdsoft_time_variant"></div>'),P=e('<div class="xdsoft_scrollbar"></div>'),$=(e('<div class="xdsoft_scroller"></div>'),e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>')),C=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>');S.find(".xdsoft_month span").after($),S.find(".xdsoft_year span").after(C),S.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(t){S.find(".xdsoft_select").hide();var n=e(this).find(".xdsoft_select").eq(0),r=0,a=0;A.currentTime&&(r=A.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),n.show();for(var o=n.find("div.xdsoft_option"),i=0;i<o.length&&o.eq(i).data("value")!=r;i++)a+=o[0].offsetHeight;return n.xdsoftScroller(a/(n.children()[0].offsetHeight-n[0].clientHeight)),t.stopPropagation(),!1}),S.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(e){e.stopPropagation(),e.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(t){A&&A.currentTime&&A.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value")),e(this).parent().parent().hide(),n.trigger("xchange.xdsoft"),k.onChangeMonth&&k.onChangeMonth.call&&k.onChangeMonth.call(n,A.currentTime,n.data("input"))}),n.setOptions=function(r){k=e.extend(!0,{},k,r),!k.open&&!k.opened||k.inline||t.trigger("open.xdsoft"),k.inline&&(n.addClass("xdsoft_inline"),t.after(n).hide(),n.trigger("afterOpen.xdsoft")),k.inverseButton&&(k.next="xdsoft_prev",k.prev="xdsoft_next"),k.datepicker?M.addClass("active"):M.removeClass("active"),k.timepicker?I.addClass("active"):I.removeClass("active"),k.value&&(t&&t.val&&t.val(k.value),A.setCurrentTime(k.value)),isNaN(k.dayOfWeekStart)||parseInt(k.dayOfWeekStart)<0||parseInt(k.dayOfWeekStart)>6?k.dayOfWeekStart=0:k.dayOfWeekStart=parseInt(k.dayOfWeekStart),k.timepickerScrollbar||P.hide();var O,H=[];if(k.minDate&&(H=/^-(.*)$/.exec(k.minDate))&&(H=Date.parseDate(H[1],k.formatDate))&&(O=H.getTime()+-1*H.getTimezoneOffset()*6e4,k.minDate=new Date(A.now().getTime()-O).dateFormat(k.formatDate)),k.maxDate&&(H=/^\+(.*)$/.exec(k.maxDate))&&(H=Date.parseDate(H[1],k.formatDate))&&(O=H.getTime()+-1*H.getTimezoneOffset()*6e4,k.maxDate=new Date(A.now().getTime()+O).dateFormat(k.formatDate)),S.find(".xdsoft_today_button").css("visibility",k.todayButton?"visible":"hidden"),k.mask){var F=function(e){try{if(document.selection&&document.selection.createRange){var t=document.selection.createRange();return t.getBookmark().charCodeAt(2)-2}if(e.setSelectionRange)return e.selectionStart}catch(n){return 0}},$=function(e,t){var e="string"==typeof e||e instanceof String?document.getElementById(e):e;if(!e)return!1;if(e.createTextRange){var n=e.createTextRange();return n.collapse(!0),n.moveEnd(t),n.moveStart(t),n.select(),!0}return!!e.setSelectionRange&&(e.setSelectionRange(t,t),!0)},C=function(e,t){var n=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return RegExp(n).test(t)};switch(t.off("keydown.xdsoft"),!0){case k.mask===!0:k.mask=k.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59");case"string"==e.type(k.mask):C(k.mask,t.val())||t.val(k.mask.replace(/[0-9]/g,"_")),t.on("keydown.xdsoft",function(n){var r=this.value,M=n.which;switch(!0){case M>=a&&M<=o||M>=i&&M<=s||M==d||M==c:var S=F(this),O=M!=d&&M!=c?String.fromCharCode(i<=M&&M<=s?M-a:M):"_";for(M!=d&&M!=c||!S||(S--,O="_");/[^0-9_]/.test(k.mask.substr(S,1))&&S<k.mask.length&&S>0;)S+=M==d||M==c?-1:1;if(r=r.substr(0,S)+O+r.substr(S+1),""==e.trim(r))r=k.mask.replace(/[0-9]/g,"_");else if(S==k.mask.length)break;for(S+=M==d||M==c?0:1;/[^0-9_]/.test(k.mask.substr(S,1))&&S<k.mask.length&&S>0;)S+=M==d||M==c?-1:1;C(k.mask,r)?(this.value=r,$(this,S)):""==e.trim(r)?this.value=k.mask.replace(/[0-9]/g,"_"):t.trigger("error_input.xdsoft");break;case!!~[x,_,b,D,w].indexOf(M)&&T:case!!~[f,h,g,p,m,y,u,v,l].indexOf(M):return!0}return n.preventDefault(),!1})}}k.validateOnBlur&&t.off("blur.xdsoft").on("blur.xdsoft",function(){k.allowBlank&&!e.trim(e(this).val()).length?(e(this).val(null),n.data("xdsoft_datetime").empty()):Date.parseDate(e(this).val(),k.format)?n.data("xdsoft_datetime").setCurrentTime(e(this).val()):(e(this).val(A.now().dateFormat(k.format)),n.data("xdsoft_datetime").setCurrentTime(e(this).val())),n.trigger("changedatetime.xdsoft")}),k.dayOfWeekStartPrev=0==k.dayOfWeekStart?6:k.dayOfWeekStart-1,n.trigger("xchange.xdsoft")},n.data("options",k).on("mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),C.hide(),$.hide(),!1});var j=I.find(".xdsoft_time_box");j.append(F),j.xdsoftScroller(),n.on("afterOpen.xdsoft",function(){j.xdsoftScroller()}),n.append(M).append(I),k.withoutCopyright!==!0&&n.append(r),M.append(S).append(O),e("body").append(n);var A=new function(){var e=this;e.now=function(){var e=new Date;return k.yearOffset&&e.setFullYear(e.getFullYear()+k.yearOffset),e},e.currentTime=this.now(),e.isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},e.setCurrentTime=function(t){e.currentTime="string"==typeof t?e.strtodatetime(t):e.isValidDate(t)?t:e.now(),
n.trigger("xchange.xdsoft")},e.empty=function(){e.currentTime=null},e.getCurrentTime=function(t){return e.currentTime},e.nextMonth=function(){var t=e.currentTime.getMonth()+1;return 12==t&&(e.currentTime.setFullYear(e.currentTime.getFullYear()+1),t=0),e.currentTime.setDate(Math.min(Date.daysInMonth[t],e.currentTime.getDate())),e.currentTime.setMonth(t),k.onChangeMonth&&k.onChangeMonth.call&&k.onChangeMonth.call(n,A.currentTime,n.data("input")),n.trigger("xchange.xdsoft"),t},e.prevMonth=function(){var t=e.currentTime.getMonth()-1;return t==-1&&(e.currentTime.setFullYear(e.currentTime.getFullYear()-1),t=11),e.currentTime.setDate(Math.min(Date.daysInMonth[t],e.currentTime.getDate())),e.currentTime.setMonth(t),k.onChangeMonth&&k.onChangeMonth.call&&k.onChangeMonth.call(n,A.currentTime,n.data("input")),n.trigger("xchange.xdsoft"),t},e.strtodatetime=function(t){var n=t?Date.parseDate(t,k.format):e.now();return e.isValidDate(n)||(n=e.now()),n},e.strtodate=function(t){var n=t?Date.parseDate(t,k.formatDate):e.now();return e.isValidDate(n)||(n=e.now()),n},e.strtotime=function(t){var n=t?Date.parseDate(t,k.formatTime):e.now();return e.isValidDate(n)||(n=e.now()),n},e.str=function(){return e.currentTime.dateFormat(k.format)}};S.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){n.data("changed",!0),A.setCurrentTime(0),n.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){t.val(A.str()),n.trigger("close.xdsoft")}),S.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,r=!1;!function a(e){A.currentTime.getMonth();t.hasClass(k.next)?A.nextMonth():t.hasClass(k.prev)&&A.prevMonth(),!r&&(n=setTimeout(a,e?e:100))}(500),e([document.body,window]).on("mouseup.xdsoft",function o(){clearTimeout(n),r=!0,e([document.body,window]).off("mouseup.xdsoft",o)})}),I.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,r=!1,a=110;!function o(e){var i=H[0].clientHeight,s=F[0].offsetHeight,u=Math.abs(parseInt(F.css("marginTop")));t.hasClass(k.next)&&s-i-k.timeHeightInTimePicker>=u?F.css("marginTop","-"+(u+k.timeHeightInTimePicker)+"px"):t.hasClass(k.prev)&&u-k.timeHeightInTimePicker>=0&&F.css("marginTop","-"+(u-k.timeHeightInTimePicker)+"px"),H.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(F.css("marginTop"))/(s-i))]),a=a>10?10:a-10,!r&&(n=setTimeout(o,e?e:a))}(500),e([document.body,window]).on("mouseup.xdsoft",function i(){clearTimeout(n),r=!0,e([document.body,window]).off("mouseup.xdsoft",i)})}),n.on("xchange.xdsoft",function(t){for(var r="",a=new Date(A.currentTime.getFullYear(),A.currentTime.getMonth(),1,12,0,0),o=0,i=A.now();a.getDay()!=k.dayOfWeekStart;)a.setDate(a.getDate()-1);r+="<table><thead><tr>";for(var s=0;s<7;s++)r+="<th>"+k.i18n[k.lang].dayOfWeek[s+k.dayOfWeekStart>6?0:s+k.dayOfWeekStart]+"</th>";r+="</tr></thead>",r+="<tbody><tr>";var u=!1,c=!1;k.maxDate!==!1&&(u=A.strtodate(k.maxDate),u=new Date(u.getFullYear(),u.getMonth(),u.getDate(),23,59,59,999)),k.minDate!==!1&&(c=A.strtodate(k.minDate),c=new Date(c.getFullYear(),c.getMonth(),c.getDate()));for(var l,f,d,p=[];o<A.currentTime.getDaysInMonth()||a.getDay()!=k.dayOfWeekStart||A.currentTime.getMonth()==a.getMonth();)p=[],o++,l=a.getDate(),f=a.getFullYear(),d=a.getMonth(),p.push("xdsoft_date"),(u!==!1&&a>u||c!==!1&&a<c)&&p.push("xdsoft_disabled"),A.currentTime.getMonth()!=d&&p.push("xdsoft_other_month"),(k.defaultSelect||n.data("changed"))&&A.currentTime.dateFormat("d.m.Y")==a.dateFormat("d.m.Y")&&p.push("xdsoft_current"),i.dateFormat("d.m.Y")==a.dateFormat("d.m.Y")&&p.push("xdsoft_today"),(0==a.getDay()||6==a.getDay()||~k.weekends.indexOf(a.dateFormat("d.m.Y")))&&p.push("xdsoft_weekend"),r+='<td data-date="'+l+'" data-month="'+d+'" data-year="'+f+'" class="xdsoft_date xdsoft_day_of_week'+a.getDay()+" "+p.join(" ")+'"><div>'+l+"</div></td>",a.getDay()==k.dayOfWeekStartPrev&&(r+="</tr>"),a.setDate(l+1);r+="</tbody></table>",O.html(r),S.find(".xdsoft_label span").eq(0).text(k.i18n[k.lang].months[A.currentTime.getMonth()]),S.find(".xdsoft_label span").eq(1).text(A.currentTime.getFullYear());var h="",m="",d="",g=function(e,t){var r=A.now();r.setHours(e),e=parseInt(r.getHours()),r.setMinutes(t),t=parseInt(r.getMinutes()),p=[],(k.maxTime!==!1&&A.strtotime(k.maxTime).getTime()<r.getTime()||k.minTime!==!1&&A.strtotime(k.minTime).getTime()>r.getTime())&&p.push("xdsoft_disabled"),(k.defaultSelect||n.data("changed"))&&parseInt(A.currentTime.getHours())==parseInt(e)&&(k.step>59||Math[k.roundTime](A.currentTime.getMinutes()/k.step)*k.step==parseInt(t))&&p.push("xdsoft_current"),parseInt(i.getHours())==parseInt(e)&&parseInt(i.getMinutes())==parseInt(t)&&p.push("xdsoft_today"),h+='<div class="xdsoft_time '+p.join(" ")+'" data-hour="'+e+'" data-minute="'+t+'">'+r.dateFormat(k.formatTime)+"</div>"};if(k.allowTimes&&e.isArray(k.allowTimes)&&k.allowTimes.length)for(var o=0;o<k.allowTimes.length;o++)m=A.strtotime(k.allowTimes[o]).getHours(),d=A.strtotime(k.allowTimes[o]).getMinutes(),g(m,d);else for(var o=0,s=0;o<(k.hours12?12:24);o++)for(s=0;s<60;s+=k.step)m=(o<10?"0":"")+o,d=(s<10?"0":"")+s,g(m,d);F.html(h);var v="",o=0;for(o=parseInt(k.yearStart,10)+k.yearOffset;o<=parseInt(k.yearEnd,10)+k.yearOffset;o++)v+='<div class="xdsoft_option '+(A.currentTime.getFullYear()==o?"xdsoft_current":"")+'" data-value="'+o+'">'+o+"</div>";for(C.children().eq(0).html(v),o=0,v="";o<=11;o++)v+='<div class="xdsoft_option '+(A.currentTime.getMonth()==o?"xdsoft_current":"")+'" data-value="'+o+'">'+k.i18n[k.lang].months[o]+"</div>";$.children().eq(0).html(v),e(this).trigger("generate.xdsoft"),t.stopPropagation()}).on("afterOpen.xdsoft",function(){if(k.timepicker&&F.find(".xdsoft_current").length){var e=H[0].clientHeight,t=F[0].offsetHeight,n=F.find(".xdsoft_current").index()*k.timeHeightInTimePicker+1;t-e<n&&(n=t-e),F.css("marginTop","-"+parseInt(n)+"px"),H.trigger("scroll_element.xdsoft_scroller",[parseInt(n)/(t-e)])}});var N=0;O.on("click.xdsoft","td",function(){N++;var r=e(this),a=A.currentTime;return!r.hasClass("xdsoft_disabled")&&(a.setFullYear(r.data("year")),a.setMonth(r.data("month")),a.setDate(r.data("date")),n.trigger("select.xdsoft",[a]),t.val(A.str()),(N>1||k.closeOnDateSelect===!0||0===k.closeOnDateSelect&&!k.timepicker)&&!k.inline&&n.trigger("close.xdsoft"),k.onSelectDate&&k.onSelectDate.call&&k.onSelectDate.call(n,A.currentTime,n.data("input")),n.data("changed",!0),n.trigger("xchange.xdsoft"),n.trigger("changedatetime.xdsoft"),void setTimeout(function(){N=0},200))}),F.on("click.xdsoft","div",function(){var t=e(this),r=A.currentTime;return!t.hasClass("xdsoft_disabled")&&(r.setHours(t.data("hour")),r.setMinutes(t.data("minute")),n.trigger("select.xdsoft",[r]),n.data("input").val(A.str()),!k.inline&&n.trigger("close.xdsoft"),k.onSelectTime&&k.onSelectTime.call&&k.onSelectTime.call(n,A.currentTime,n.data("input")),n.data("changed",!0),n.trigger("xchange.xdsoft"),void n.trigger("changedatetime.xdsoft"))}),n.mousewheel&&M.mousewheel(function(e,t,n,r){return!k.scrollMonth||(t<0?A.nextMonth():A.prevMonth(),!1)}),n.mousewheel&&H.unmousewheel().mousewheel(function(e,t,n,r){if(!k.scrollTime)return!0;var a=H[0].clientHeight,o=F[0].offsetHeight,i=Math.abs(parseInt(F.css("marginTop"))),s=!0;return t<0&&o-a-k.timeHeightInTimePicker>=i?(F.css("marginTop","-"+(i+k.timeHeightInTimePicker)+"px"),s=!1):t>0&&i-k.timeHeightInTimePicker>=0&&(F.css("marginTop","-"+(i-k.timeHeightInTimePicker)+"px"),s=!1),H.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(F.css("marginTop"))/(o-a))]),e.stopPropagation(),s}),n.on("changedatetime.xdsoft",function(){k.onChangeDateTime&&k.onChangeDateTime.call&&k.onChangeDateTime.call(n,A.currentTime,n.data("input"))}).on("generate.xdsoft",function(){k.onGenerate&&k.onGenerate.call&&k.onGenerate.call(n,A.currentTime,n.data("input"))});var Y=0;t.mousewheel&&t.mousewheel(function(e,r,a,o){return!k.scrollInput||(!k.datepicker&&k.timepicker?(Y=F.find(".xdsoft_current").length?F.find(".xdsoft_current").eq(0).index():0,Y+r>=0&&Y+r<F.children().length&&(Y+=r),F.children().eq(Y).length&&F.children().eq(Y).trigger("mousedown"),!1):k.datepicker&&!k.timepicker?(M.trigger(e,[r,a,o]),t.val&&t.val(A.str()),n.trigger("changedatetime.xdsoft"),!1):void 0)});var z=function(){var t=n.data("input").offset(),r=t.top+n.data("input")[0].offsetHeight-1,a=t.left;r+n[0].offsetHeight>e(window).height()+e(window).scrollTop()&&(r=t.top-n[0].offsetHeight+1),a+n[0].offsetWidth>e(window).width()&&(a=t.left-n[0].offsetWidth+n.data("input")[0].offsetWidth),n.css({left:a,top:r})};n.on("open.xdsoft",function(){var t=!0;k.onShow&&k.onShow.call&&(t=k.onShow.call(n,A.currentTime,n.data("input"))),t!==!1&&(n.show(),n.trigger("afterOpen.xdsoft"),z(),e(window).off("resize.xdsoft",z).on("resize.xdsoft",z),k.closeOnWithoutClick&&e([document.body,window]).on("mousedown.xdsoft",function r(){n.trigger("close.xdsoft"),e([document.body,window]).off("mousedown.xdsoft",r)}))}).on("close.xdsoft",function(e){var t=!0;k.onClose&&k.onClose.call&&(t=k.onClose.call(n,A.currentTime,n.data("input"))),t===!1||k.opened||k.inline||n.hide(),e.stopPropagation()}).data("input",t);var L=0;n.data("xdsoft_datetime",A),n.setOptions(k);var W=k.value?k.value:t&&t.val&&t.val()?t.val():"";W&&A.isValidDate(W=Date.parseDate(W,k.format))?n.data("changed",!0):W="",A.setCurrentTime(W?W:0),n.trigger("afterOpen.xdsoft"),t.data("xdsoft_datetimepicker",n).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(e){t.is(":disabled")||t.is(":hidden")||!t.is(":visible")||(clearTimeout(L),L=setTimeout(function(){t.is(":disabled")||t.is(":hidden")||!t.is(":visible")||(A.setCurrentTime(t&&t.val&&t.val()?t.val():0),n.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(t){var r=(this.value,t.which);switch(!0){case!!~[l].indexOf(r):var a=e("input:visible,textarea:visible");return n.trigger("close.xdsoft"),a.eq(a.index(this)+1).focus(),!1;case!!~[v].indexOf(r):return n.trigger("close.xdsoft"),!0}})},S=function(t){var n=t.data("xdsoft_datetimepicker");n&&(n.data("xdsoft_datetime",null),n.remove(),t.data("xdsoft_datetimepicker",null).off("open.xdsoft focusin.xdsoft focusout.xdsoft mousedown.xdsoft blur.xdsoft keydown.xdsoft"),e(window).off("resize.xdsoft"),e([window,document.body]).off("mousedown.xdsoft"),t.unmousewheel&&t.unmousewheel())};return e(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){e.keyCode==u&&(T=!0)}).on("keyup.xdsoftctrl",function(e){e.keyCode==u&&(T=!1)}),this.each(function(){var t;if(t=e(this).data("xdsoft_datetimepicker")){if("string"===e.type(r))switch(r){case"show":e(this).select().focus(),t.trigger("open.xdsoft");break;case"hide":t.trigger("close.xdsoft");break;case"destroy":S(e(this));break;case"reset":this.value=this.defaultValue,this.value&&t.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,k.format))||t.data("changed",!1),t.data("xdsoft_datetime").setCurrentTime(this.value)}else t.setOptions(r);return 0}"string"!==e.type(r)&&M(e(this))})}}(jQuery),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(e){null==Date.formatFunctions[e]&&Date.createNewFormat(e);var t=Date.formatFunctions[e];return this[t]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var code="Date.prototype."+funcName+" = function() {return ",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;eval(code.substring(0,code.length-3)+";}")},Date.getFormatCode=function(e){switch(e){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(e)+"' + "}},Date.parseDate=function(e,t){null==Date.parseFunctions[t]&&Date.createParser(t);var n=Date.parseFunctions[t];return Date[n](e)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$"),eval(code)},Date.formatCodeToRegex=function(e,t){switch(e){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:0,c:null,s:"(?:\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+t+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+t+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+t+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+t+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(e)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var e=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var t=0;t<this.getMonth();++t)e+=Date.daysInMonth[t];return e+this.getDate()-1},Date.prototype.getWeekOfYear=function(){var e=this.getDayOfYear()+(4-this.getDay()),t=new Date(this.getFullYear(),0,1),n=7-t.getDay()+4;return document.write(n),String.leftPad((e-n)/7+1,2,"0")},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100||e%400==0&&e)},Date.prototype.getFirstDayOfMonth=function(){var e=(this.getDay()-(this.getDate()-1))%7;return e<0?e+7:e},Date.prototype.getLastDayOfMonth=function(){var e=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return e<0?e+7:e},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(e){return e.replace(/('|\\)/g,"\\$1")},String.leftPad=function(e,t,n){var r=new String(e);for(null==n&&(n=" ");r.length<t;)r=n+r;return r},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"},function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a,o=t||window.event,i=[].slice.call(arguments,1),s=0,u=0,c=0,l=0,f=0;return t=e.event.fix(o),t.type="mousewheel",o.wheelDelta&&(s=o.wheelDelta),o.detail&&(s=o.detail*-1),o.deltaY&&(c=o.deltaY*-1,s=c),o.deltaX&&(u=o.deltaX,s=u*-1),void 0!==o.wheelDeltaY&&(c=o.wheelDeltaY),void 0!==o.wheelDeltaX&&(u=o.wheelDeltaX*-1),l=Math.abs(s),(!n||l<n)&&(n=l),f=Math.max(Math.abs(c),Math.abs(u)),(!r||f<r)&&(r=f),a=s>0?"floor":"ceil",s=Math[a](s/n),u=Math[a](u/r),c=Math[a](c/r),i.unshift(t,s,u,c),(e.event.dispatch||e.event.handle).apply(this,i)}var n,r,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(e.event.fixHooks)for(var i=a.length;i;)e.event.fixHooks[a[--i]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=o.length;e;)this.addEventListener(o[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(){orderApp.directive("datetimepicker",function(){return{restrict:"EA",require:"ngModel",link:function(e,t,n,r){function a(e){r.$setViewValue(e),o()}var o=e.$watch(function(){return $(t).append("<input id='date-"+n.dateid+"' style='border:none;width:100%;height:100%' value='"+r.$modelValue+"'>"),$(t).css("padding","0"),t.on("change",function(){e.$apply(function(){r.$setViewValue($("#date-"+n.dateid).val())})}),t.on("click",function(){$("#date-"+n.dateid).datetimepicker({format:n.format||"Y/m/d h:i",onClose:function(){t.change()}})}),t.click(),r.$modelValue},a)}}})}(),function(){"use strict";angular.module("commonDashboard",[]).service("CommonService",["$http","$rootScope","$q","$filter",function(e,t,n,r){var a=this;a.PermissionsHad={},a.PermissionsNameHad={},a.fnGetPermissionsHad=function(t,r){var o=n.defer();return null==a.PermissionsHad[t]?(e.post("/user/allPermissionsHad",{id:t,groupId:r}).then(function(e){return 200!==e.status||1!=e.data.status?void o.reject():(a.PermissionsHad[t]=e.data.data.allPermissionHad,a.PermissionsNameHad[t]=e.data.data.allPermissionNameHad,void o.resolve(a.PermissionsHad[t]))}),o.promise):n.when(a.PermissionsHad[t])},a.fnGetPermissionsNameHad=function(t,r){var o=n.defer();return null==a.PermissionsNameHad[t]?(e.post("/user/allPermissionsHad",{id:t,groupId:r}).then(function(e){return 200!==e.status||1!=e.data.status?void o.reject():(a.PermissionsHad[t]=e.data.data.allPermissionHad,a.PermissionsNameHad[t]=e.data.data.allPermissionNameHad,void o.resolve(a.PermissionsNameHad[t]))}),o.promise):n.when(a.PermissionsNameHad[t])};var o={};a.fnGetUsersBygroup=function(t){var r=n.defer();return o[t]?n.when(o[t]):(e.get("/group/getUsers/"+t).then(function(e){1!=e.data.status&&r.reject("status 0"),o[t]=e.data.data,r.resolve(e.data.data)}),r.promise)};var i={};a.fnGetusersOptional=function(){var t=n.defer();return angular.equals({},i)?(e.get("/user/getUserOptional/").then(function(e){1!=e.data.status&&t.reject("status 0"),i=e.data.data,t.resolve(e.data.data)}),t.promise):n.when(i)},a.filterData=function(e,t){return r("filter")(e,t)},a.orderData=function(e,t){return t.sorting()?r("orderBy")(e,t.orderBy()):e},a.sliceOrderData=function(e,t){return a.orderData(e,t).slice((t.page()-1)*t.count(),t.page()*t.count())},a.transformData=function(e,t,n){return a.sliceOrderData(a.filterData(e,t),n)}}]).filter("zwbIdToName",function(){return function(e,t){var n=e;return angular.forEach(t,function(t,r){if(t.id==e)return void(n=t.name)}),n}}).filter("zwbExceptFields",function(){return function(e,t,n){var r=!0;return angular.forEach(n,function(e,n){if(e==t)return void(r=!1)}),r}})}(),function(){"use strict";angular.module("userDashboard",[]).service("UserService",["$http","$state","$filter","$q",function(e,t,n,r){var a=this;a.profileData={},a.askLeaveInfo={type:"事假",total_time:0,status:!1},a.leavesInfo={},a.getProfile=function(){var t=r.defer();return angular.equals({},a.profileData)?(e.get("user/getProfile").then(function(e){return 200!==e.status||1!=e.data.status?void t.reject():(a.profileData=e.data.data.user,a.profileData.password="",void t.resolve(a.profileData))}),t.promise):r.when(a.profileData)},a.profileUpdate=function(){e.post("user/profileUpdate",a.profileData).then(function(e){1==e.data.status&&(a.profileData.updateStatus=!0)},function(e){})},a.askforLeave=function(){a.pending||(a.pending=!0,e.post("leave",a.askLeaveInfo).then(function(e){1==e.data.status?(a.askLeaveInfo.status=!0,setTimeout(function(){a.askLeaveInfo={}},3e3)):(a.askLeaveInfo.err=e.data.msg,setTimeout(function(){a.askLeaveInfo.err=null},2e3))},function(e){})["finally"](function(){a.pending=!1}))}}]).service("LeaveService",["$http","$filter","$q",function(e,t,n){function r(e,n){return n.sorting()?t("orderBy")(e,n.orderBy()):filteredData}function a(e,t){return e.slice((t.page()-1)*t.count(),t.page()*t.count())}var o,i;this.fnGetLeaves=function(t){var s=n.defer();if(angular.isUndefined(o))return e.get("/leave").then(function(e){if(200!==e.status||1!=e.data.status)return void s.reject();i=e.data.data.recordsTotal,t.total(i),o=e.data.data.data;var n=a(r(o,t),t);s.resolve(n)}),s.promise;var u=a(r(o,t),t);return t.total(i),n.when(u)}}]).controller("UserInfoController",["$scope","UserService",function(e,t){e.User=t,t.getProfile()}]).controller("ProfileUpdateController",["$scope","UserService",function(e,t){e.User=t,t.getProfile()}]).controller("AskforLeaveController",["$scope","UserService","$filter",function(e,t,n){function r(e,t){var n=new Date(t),r=0;r=0==n.getDay()?7:n.getDay();var a=24*(r+7*e)*60*60*1e3;return new Date(t-a)}function a(e,t){var n,a=864e5;n=(t-e)/a;var o=e.getHours()<9?9:e.getHours(),i=t.getHours()>18?18:t.getHours(),s=60*i+t.getMinutes()-60*o-e.getMinutes(),u=s/60,c=r(0,e.getTime()).getTime(),l=r(0,t.getTime()).getTime()+6*a,f=((l-c)/a+1)/7*1.5-1.5;0!=f&&(t.getDay()>0&&t.getDay<6&&(f-=1.5),6==t.getDay()&&(f-=.5),0==e.getDay()&&(f-=.5));var d=parseInt(f),p=f.toFixed(1)-parseInt(f);p=p>=.4&&p<=.6?.5:0;var h=parseInt(n),m=n.toFixed(1)-parseInt(n),g=h-d;return m>=.4&&m<=.6?m=.5:m<.4?m=0:(g+=1,m=0),u+=9*m,u-=9*p,g=u<0?g-1:g,u=u<0?u+9:u,u=u.toFixed(1),[g,u]}e.User=t,t.askLeaveInfo.user_id=e.gUserInfo.userId,t.askLeaveInfo.supervisor_id=e.gUserInfo.supervisor_id;var o=n("date");t.askLeaveInfo.begin=o(new Date,"yyyy/MM/dd HH:mm"),t.askLeaveInfo.end=o(new Date,"yyyy/MM/dd HH:mm"),e.$watch(function(){return{from:t.askLeaveInfo.begin,to:t.askLeaveInfo.end}},function(n,r){var o=new Date(n.from),i=new Date(n.to);if(o>i)return void(e.message="结束时间需大于开始时间");var s=a(o,i);t.askLeaveInfo.total_day=s[0],t.askLeaveInfo.total_hour=s[1],t.askLeaveInfo.total_time=9*parseInt(s[0])+parseFloat(s[1])},!0)}]).controller("GetLeavesController",["$scope","LeaveService","$filter","$location","NgTableParams",function(e,t,n,r,a){function o(){var e={page:1,sorting:{created_at:"asc"}},n={filterDelay:0,paginationMaxBlocks:3,paginationMinBlocks:2,getData:function(e){return r.search(e.url()),t.fnGetLeaves(e)}};return new a(e,n)}var i=this;i.$injet=["NgTableParams","ngTableSimpleList"],i.tableParams=o(),i.cols=[{field:"created_at",title:"申请时间",sortable:"created_at",show:!0},{field:"type",title:"请假原因",show:!0},{field:"grant",title:"审批结果",show:!0},{field:"begin",title:"开始请假时间",sortable:"begin",show:!0},{field:"end",title:"结束请假时间",sortable:"end",show:!0},{field:"total_time",title:"合计请假时数",sortable:"total_time",show:!0}]}])}();